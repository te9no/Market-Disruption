# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## プロジェクト概要

このリポジトリは「マーケット・ディスラプション」という転売ヤーをテーマにしたライナー・クニツィア風ボードゲームのゲームデザイン文書を含んでいます。

## ファイル構造

- **Rule.md**: メインのゲームルールとデザイン仕様書（日本語）

## ゲームアーキテクチャ

### コアコンセプト
- **勝利条件**: 威厳17ポイント+資金75以上または資金150達成
- **ゲーム時間**: 30-45分
- **プレイヤー数**: 3-5人
- **メインループ**: アクションフェーズ → オートマフェーズ → 市場フェーズ → 勝利判定
- クニツィア風のジレンマがあるゲームにしたいです。

### 主要システム
1. **アクションポイントシステム**: 各プレイヤー3AP/ラウンド
2. **需要システム**: 2d6による商品購入判定
3. **威厳システム**: -5～+15の評判システム
4. **オートマシステム**: メーカー・オートマと転売ヤー・オートマの自動プレイヤー
5. **労働システム**: アルバイト(2AP→5資金)と日雇い労働(3AP→18資金)

### ゲームバランス要素
- **二重戦略**: 正規ルート（持続的・低リスク）vs 転売ルート（高リターン・高リスク）
- **規制システム**: プレイヤー主導の規制推進（2AP、2d6で10+で成功）
- **市場汚染**: 転売成功時にカテゴリーに汚染マーカー追加
- **資金枯渇対策**: 労働システム（アルバイト・日雇い）による救済措置

## プレイテスト

### 順守すべきルール
バランス調整などのために、プレイテストをするときは以下に従ってください。
- 4人の仮想プレイヤーと、両方のオートマが参加します。
- 各プレイヤーは実際には実行できない行動を選択することはありません。（資金が足りないのに製造するなど）
- 各自に割り当てられているAPの上限を超えてアクションすることはありません。（1AP+1AP+2AP>3APの行動や、3APしかないのに4アクション目を行うなど）
  ※必ずこのルールは守ってください。アクションを行うたびに残りアクション数を計算し、その中で実行可能なアクションを選択してください。
- 「playtest\yyyymmdd_hhmmss_テーマ」にプレイログを保存してください。1ファイルが1ゲーム分で、1ラウンドごとに各プレイヤーの動きを記録します。
- プレイログには、1ラウンドごとにあなたの感想率直なを記入してください。
- 各プレイヤーのパーソナル・マーケットグリッドも記録してください。
- ゲームのプレイは毎回ダイスロールを行って、1ターン事に記録してください。
- 日雇い労働は実行可能な条件を順守してください。
- 人気度は1より下がりません。

### 結果について
プレイログはcommitして、同期してgithubで閲覧できるようにしてください。

## 特記事項

- 文書は日本語で記述されています
- ゲームメカニクスは詳細に定義されており、実装時の参考になります
- リソース管理（資金、威厳、転売履歴）とリスク・リターンのバランスが重要な設計思想です

## Webアプリケーションについて
### 機能テスト
- boardgame.ioを使用したWeb用ゲームを実装します。
- Rule.mdに従った実装にします。
- backendはrailway、frontendはnetlifyを使用します。
- ゲームはPCブラウザ、スマホブラウザで使用できます。
- game_feature_test_plan.mdに従ってテストを実施します。
- ビルドが成功するまで、ローカルでビルドテストをして、完了したらコミット・同期してgithubに反映してください。
- テスト結果はレポートとして、reportフォルダに保存してください。