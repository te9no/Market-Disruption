# マーケット・ディスラプション 機能試験計画

## 📋 試験項目概要

### 試験目的
- ゲームの全機能が仕様通りに動作することを確認
- エラーハンドリングが適切に機能することを確認
- パフォーマンスとユーザビリティの検証

### 試験範囲
- 基本ゲームフロー
- プレイヤーアクションシステム
- オートマシステム
- 市場システム
- UI/UX
- エラーハンドリング

---

## 🎯 1. 基本ゲームフロー試験

### 1.1 ゲーム作成・参加
- [ ] ゲーム作成が正常に完了する
- [ ] 他プレイヤーがゲームに参加できる
- [ ] 最大人数（5人）での参加制限が機能する
- [ ] 満席時の参加拒否が適切に表示される
- [ ] ゲームID検索機能が正常に動作する

### 1.2 ゲーム開始・初期化
- [ ] 初期リソース（資金30、威厳5）が正しく設定される
- [ ] 初期設計2個が正しく登録される
- [ ] プレイヤーの手番順が正しく設定される
- [ ] 最初のプレイヤーがアクションフェーズに入る

### 1.3 ラウンド進行
- [ ] アクションフェーズ → オートマフェーズ → 市場フェーズの順序が正しい
- [ ] 各フェーズで適切なUIが表示される
- [ ] フェーズスキップ機能が正常に動作する
- [ ] ラウンド終了時にAPが3に回復する

### 1.4 勝利判定
- [ ] 威厳勝利（威厳17 + 資金75）が正しく判定される
- [ ] 資金勝利（資金150）が正しく判定される
- [ ] ゲーム終了時に勝者が正しく表示される
- [ ] 手動ゲーム終了が機能する

---

## ⚡ 2. プレイヤーアクションシステム試験

### 2.1 1APアクション

#### 2.1.1 製造アクション
- [ ] 設計スロットから正しく商品を製造できる
- [ ] 製造コストが正しく計算・消費される
- [ ] 製造した商品が在庫に追加される
- [ ] 設計がない場合のエラーメッセージ表示
- [ ] 資金不足時のエラーメッセージ表示

#### 2.1.2 販売アクション
- [ ] 在庫から商品を選択して販売できる
- [ ] 価格設定が正しく反映される
- [ ] 転売品の価格制限が正しく適用される
- [ ] 規制レベルに応じた価格制限が機能する
- [ ] 在庫がない場合のエラーメッセージ表示

#### 2.1.3 購入アクション
- [ ] 他プレイヤーの商品を購入できる
- [ ] オートマの商品を購入できる
- [ ] 購入時に正しく資金が消費される
- [ ] 購入時に正しく資金が支払われる
- [ ] 購入した商品が在庫に追加される
- [ ] 転売マーカーが正しく付与される
- [ ] 資金不足時のエラーメッセージ表示

#### 2.1.4 レビューアクション
- [ ] 他プレイヤーの商品にレビューできる
- [ ] 高評価で人気度+1、低評価で人気度-1が機能する
- [ ] レビュー外注機能が正常に動作する
- [ ] 威厳消費が正しく行われる
- [ ] 威厳不足時のエラーメッセージ表示

#### 2.1.5 買い戻しアクション
- [ ] 出品中の商品を買い戻しできる
- [ ] 買い戻した商品が在庫に戻る
- [ ] 出品商品がない場合のエラーメッセージ表示

#### 2.1.6 威厳購入アクション
- [ ] 10資金で威厳1ポイント購入できる
- [ ] 資金消費と威厳増加が正しく反映される
- [ ] 資金不足時のエラーメッセージ表示

### 2.2 2APアクション

#### 2.2.1 設計アクション
- [ ] 3つのダイス選択肢が表示される
- [ ] 選択したダイスが設計として登録される
- [ ] オープンソース設定が正しく機能する
- [ ] オープンソース時の威厳+2が反映される
- [ ] スロット満杯時のエラーメッセージ表示

#### 2.2.2 アルバイトアクション
- [ ] 5資金が正しく獲得される
- [ ] AP消費が正しく行われる

#### 2.2.3 規制推進アクション
- [ ] 2d6のダイスロールが実行される
- [ ] 合計9+で規制レベルが上昇する
- [ ] ダイス結果が正しく表示される
- [ ] 規制レベル3で転売品没収が実行される

#### 2.2.4 トレンド調査アクション
- [ ] 3d6のダイスロールが実行される
- [ ] トレンド効果が正しく適用される
- [ ] ダイス結果が表示される

### 2.3 3APアクション

#### 2.3.1 日雇い労働アクション
- [ ] 18資金が正しく獲得される
- [ ] 資金100以下の制限が機能する
- [ ] 資金100超過時のエラーメッセージ表示

### 2.4 APシステム
- [ ] 各アクションで正しいAP数が消費される
- [ ] AP不足時のエラーメッセージ表示
- [ ] ターン終了でAPが正しくリセットされる
- [ ] 残りAP表示が正確に更新される

---

## 🤖 3. オートマシステム試験

### 3.1 メーカーオートマ
- [ ] 2d6ダイスロールが正しく実行される
- [ ] ダイス結果に応じた行動が実行される
- [ ] 製造アクションが正しく動作する
- [ ] 在庫一掃セールが正しく動作する
- [ ] 商品がパーソナルマーケットに正しく配置される

### 3.2 転売オートマ
- [ ] 2d6ダイスロールが正しく実行される
- [ ] 大量購入アクションが正しく動作する
- [ ] 転売アクションが正しく動作する
- [ ] 規制時の活動停止が機能する
- [ ] 資金管理が正しく行われる

### 3.3 オートマ共通
- [ ] オートマの行動がログに記録される
- [ ] オートマの商品が他プレイヤーから購入可能
- [ ] オートマとプレイヤーの相互作用が正常

---

## 🛒 4. 市場システム試験

### 4.1 パーソナルマーケット
- [ ] 商品が正しい座標（価格×人気度）に配置される
- [ ] 同座標への重複配置が防止される
- [ ] 商品情報（カテゴリー、価値、コスト）が正しく表示される
- [ ] 転売品マーカーが正しく表示される

### 4.2 市場フェーズ
- [ ] 需要ダイス（2d6）が正しく振られる
- [ ] 該当商品から人気度順に購入される
- [ ] 購入上限（5個）が正しく適用される
- [ ] 購入時の資金移動が正しく行われる

### 4.3 価格・人気度システム
- [ ] 人気度が1-6の範囲で正しく管理される
- [ ] 価格変更が正しく反映される
- [ ] レビューによる人気度変更が機能する

---

## 🎨 5. UI/UX試験

### 5.1 レイアウト・表示
- [ ] 全ての情報が適切に表示される
- [ ] モバイル・デスクトップでの表示が正常
- [ ] スクロール・タブ切り替えが正常に動作
- [ ] ゲーム状態の変更が即座に反映される

### 5.2 操作性
- [ ] ボタンクリックが正しく反応する
- [ ] フォーム入力が正しく処理される
- [ ] ドロップダウン選択が正常に動作する
- [ ] 無効なアクション時の適切な制御

### 5.3 フィードバック
- [ ] アクション実行時の成功メッセージ
- [ ] エラー時の分かりやすいメッセージ
- [ ] 処理中の適切なローディング表示
- [ ] 音声・視覚的フィードバック

---

## ⚠️ 6. エラーハンドリング・エッジケース試験

### 6.1 リソース不足エラー
- [ ] 資金不足時の適切なエラーメッセージ
- [ ] AP不足時の適切なエラーメッセージ
- [ ] 威厳不足時の適切なエラーメッセージ
- [ ] 在庫不足時の適切なエラーメッセージ

### 6.2 不正入力・操作エラー
- [ ] 無効な価格設定の拒否
- [ ] 範囲外の人気度設定の拒否
- [ ] 存在しない商品への操作拒否
- [ ] 重複操作の防止

### 6.3 ネットワーク・接続エラー
- [ ] 接続断時の適切なエラー表示
- [ ] 再接続時の状態復旧
- [ ] サーバーエラー時の適切な処理
- [ ] タイムアウト時の処理

### 6.4 ゲーム状態エラー
- [ ] 不正なフェーズでの操作拒否
- [ ] 他プレイヤーのターン中の操作拒否
- [ ] ゲーム終了後の操作拒否

---

## 🔄 7. 統合テストシナリオ

### 7.1 通常ゲームフロー
```
1. 4人プレイヤーでゲーム作成・開始
2. 各プレイヤーが異なるアクションを実行
3. オートマフェーズの正常動作確認
4. 市場フェーズの正常動作確認
5. 5ラウンド継続してゲーム終了
```

### 7.2 威厳勝利シナリオ
```
1. プレイヤーAが設計・オープンソース・威厳購入を重点実行
2. 威厳17・資金75達成で勝利確認
```

### 7.3 資金勝利シナリオ
```
1. プレイヤーBが転売・日雇い労働を重点実行
2. 資金150達成で勝利確認
```

### 7.4 規制発動シナリオ
```
1. 規制推進を複数回実行して規制レベル3到達
2. 転売品没収の正常動作確認
3. 転売オートマ停止の確認
```

### 7.5 高負荷シナリオ
```
1. 最大人数（5人）でのゲーム実行
2. 同時アクション実行時の処理確認
3. 大量商品取引時の処理速度確認
```

---

## 📊 8. パフォーマンス試験

### 8.1 レスポンス時間
- [ ] アクション実行時間 < 1秒
- [ ] ページ読み込み時間 < 3秒
- [ ] ゲーム状態更新時間 < 0.5秒

### 8.2 メモリ使用量
- [ ] 長時間プレイでのメモリリーク確認
- [ ] 大量データ処理時の安定性確認

### 8.3 同時接続
- [ ] 複数ゲーム同時実行の安定性
- [ ] 最大接続数での動作確認

---

## 🎯 9. 受け入れテスト

### 9.1 ユーザビリティテスト
- [ ] 初回プレイヤーでも操作可能
- [ ] ルール理解しやすい画面設計
- [ ] 直感的な操作フロー

### 9.2 バランステスト
- [ ] 各戦略の勝率バランス確認
- [ ] ゲーム時間が30-45分に収まる
- [ ] 適切な競技性の確保

### 9.3 安定性テスト
- [ ] 24時間連続動作での安定性
- [ ] 異常操作での耐性確認
- [ ] データ整合性の確保

---

## 📝 試験実行要領

### 試験環境
- **ブラウザ**: Chrome, Firefox, Safari, Edge
- **デバイス**: デスクトップ, タブレット, スマートフォン
- **ネットワーク**: 高速回線, 低速回線, 不安定回線

### 試験データ
- 正常データでの動作確認
- 境界値での動作確認
- 異常データでの耐性確認

### 合格基準
- 全機能が仕様通りに動作する
- エラー時に適切なメッセージが表示される
- パフォーマンス要件を満たす
- ユーザビリティ要件を満たす

### 試験ログ
各試験項目について以下を記録：
- 実行日時
- 試験者
- 実行結果（Pass/Fail）
- 発見された問題
- 修正対応状況